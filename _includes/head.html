<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    {% if jekyll.environment == "production" %}
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-108735070-1"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
    
      gtag('config', 'UA-108735070-1');
    </script>
        {% assign sitekey = "6LdaQ00UAAAAALKO6Y8zMJcd8UXfS9C0Aeg5rok0" %}
    {% elsif jekyll.environment == "development" %}
        {% assign sitekey = "6LfiZ00UAAAAAOv13yLR_BbBQ-X36qeBjV6y3o4x" %}
    {% endif %}
    <!-- Google reCaptcha Script -->
    <!--<script src="https://api.dynamicgravitysystems.com/js/sendmail.js" async defer></script>-->
    <script>
        function validate(){
            const form = document.getElementById("email-form");
            if (form.reportValidity()){
                grecaptcha.reset();
                grecaptcha.execute();
            } else {
                alert("Invalid input in form");
            }
        }
        function onEmailSubmit(token){
            // TODO: Iterate through form to grab inputs?
            var fromEmail = document.getElementById('email-input');
            var fromName = document.getElementById('name-input');
            var subject = document.getElementById('subject-input');
            var message = document.getElementById('body-input');
            var payload = {
                from: fromEmail,
                name: fromName,
                subject: subject,
                message: message,
                captcha: token
            };
            var http = new XMLHttpRequest();
            // http.open("POST", "https://api.dynamicgravitysystems.com/sendmail", true);
            http.open("POST", "https://localhost/sendmail", true);
            http.onload = function () {
                M.toast({html: "Your message was sent!", displayLength: 4000});
            };
            http.onerror = function (ev) {
                M.toast({html: "Error sending your message.", displayLength: 4000});
            };
            http.setRequestHeader("Content-type", "application/json");
            http.send(JSON.stringify(payload));
        }
    </script>
    <script src='https://www.google.com/recaptcha/api.js' async defer></script>


    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="/css/main.css"   media="screen,projection"/>
    <!--Import Google Orbitron Font for DgS Headers-->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans|Orbitron">
    <!--Let browser know website is optimized for mobile-->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <!-- Load Favicons -->
    <link rel="icon" type="image/png" href="/assets/logos/favicon.png">
    <link rel="shortcut icon" type="image/png" href="/assets/logos/favicon.png">
    <link rel="shortcut icon" type="image/x-icon" href="/assets/logos/favicon.ico">

    <title>Dynamic Gravity Systems: Advanced Technology Gravity Meters</title>
</head>
